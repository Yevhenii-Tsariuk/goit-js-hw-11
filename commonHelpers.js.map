{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nfunction searchPhoto(query) {\n  const API_KEY = '44790936-a9a83b9ad64ff44b33786cafe';\n  return fetch(`https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`).then(\n    (response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchForm = document.querySelector('.search-form');\n  const gallery = document.querySelector(\".gallery\");\n\n  if (!gallery) {\n    console.error('Gallery element not found');\n    return;\n  }\n\n  searchForm.addEventListener('submit', handleSearch);\n\n  function handleSearch(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget; // посилання на елемент форми\n    const queryValue = form.elements.query.value.toLowerCase(); // значення, яке написав користувач\n\n    searchPhoto(queryValue) // робимо запит на сервер та отримуємо відповідь\n      .then((response) => {\n        if (response.hits.length === 0) {\n          iziToast.warning({\n            title: 'No Images Found',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n          });\n        } else {\n          clearGallery();\n          addImagesToGallery(response.hits);\n        }\n      })\n      .catch(err => {\n        iziToast.error({\n          title: 'Error',\n          message: `Something went wrong: ${err.message}`,\n        });\n      })\n      .finally(() => form.reset());\n  }\n\n  function clearGallery() {\n    gallery.innerHTML = '';\n  }\n\n  function addImagesToGallery(images) {\n    const markup = createPhotoCard(images);\n    gallery.insertAdjacentHTML(\"afterbegin\", markup);\n  }\n\n  function createPhotoCard(arr) {\n    return arr\n      .map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\" onclick=\"event.preventDefault()\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n          />\n          <ul class=\"gallery-info\">\n            <li  class=\"gallery-item-text\"><p>Likes ${likes}</p></li>\n            <li class=\"gallery-item-text\"><p>Views ${views}</p></li>\n            <li class=\"gallery-item-text\"><p>Comments ${comments}</p></li>\n            <li  class=\"gallery-item-text\"><p>Downloads ${downloads}</p></li>\n          </ul>\n        </a>\n      </li>`\n      )\n      .join('');\n  }\n});\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\ngallery.refresh();"],"names":["searchPhoto","query","response","searchForm","gallery","handleSearch","event","form","queryValue","iziToast","clearGallery","addImagesToGallery","err","images","markup","createPhotoCard","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"6vBAMA,SAASA,EAAYC,EAAO,CAE1B,OAAO,MAAM,qEAA6CA,CAAK,0DAA0D,EAAE,KACxHC,GAAa,CACZ,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACjB,CACL,CACA,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAI,CAACA,EAAS,CACZ,QAAQ,MAAM,2BAA2B,EACzC,MACD,CAEDD,EAAW,iBAAiB,SAAUE,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAaD,EAAK,SAAS,MAAM,MAAM,cAE7CP,EAAYQ,CAAU,EACnB,KAAMN,GAAa,CACdA,EAAS,KAAK,SAAW,EAC3BO,EAAS,QAAQ,CACf,MAAO,kBACP,QAAS,0EACrB,CAAW,GAEDC,IACAC,EAAmBT,EAAS,IAAI,EAE1C,CAAO,EACA,MAAMU,GAAO,CACZH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBAAyBG,EAAI,OAAO,EACvD,CAAS,CACT,CAAO,EACA,QAAQ,IAAML,EAAK,MAAK,CAAE,CAC9B,CAED,SAASG,GAAe,CACtBN,EAAQ,UAAY,EACrB,CAED,SAASO,EAAmBE,EAAQ,CAClC,MAAMC,EAASC,EAAgBF,CAAM,EACrCT,EAAQ,mBAAmB,aAAcU,CAAM,CAChD,CAED,SAASC,EAAgBC,EAAK,CAC5B,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,wCAE9CL,CAAa;AAAA;AAAA;AAAA,mBAGlCD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sDAK+BC,CAAK;AAAA,qDACNC,CAAK;AAAA,wDACFC,CAAQ;AAAA,0DACNC,CAAS;AAAA;AAAA;AAAA,YAI5D,EACA,KAAK,EAAE,CACX,CACH,CAAC,EAED,IAAInB,EAAU,IAAIoB,EAAe,aAAc,CAC7C,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EACDpB,EAAQ,QAAS"}